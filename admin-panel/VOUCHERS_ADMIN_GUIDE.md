# Hฦฐแปng dแบซn quแบฃn lรฝ Mรฃ giแบฃm giรก (Vouchers) trong Admin Panel

## โ Chแปฉc nฤng ฤรฃ cรณ sแบตn

Admin panel ฤรฃ cรณ ฤแบงy ฤแปง chแปฉc nฤng CRUD (Create, Read, Update, Delete) cho mรฃ giแบฃm giรก.

## Truy cแบญp

**URL**: `http://localhost:5173/promotions`

**Menu**: Click vรo "Mรฃ giแบฃm giรก" trong sidebar (icon Tag mรu hแปng)

## Cรกc chแปฉc nฤng

### 1. โ XEM danh sรกch mรฃ giแบฃm giรก

- Hiแปn thแป bแบฃng vแปi cรกc cแปt:
  - Mรฃ code (VD: SUMMER2024)
  - Tiรชu ฤแป
  - Giรก trแป giแบฃm (% hoแบทc sแป tiแปn)
  - ฤฦกn tแปi thiแปu
  - Thแปi gian รกp dแปฅng
  - Trแบกng thรกi (ฤang diแปn ra / Sแบฏp diแปn ra / ฤรฃ hแบฟt hแบกn)
  - Kรญch hoแบกt (On/Off switch)
  - Thao tรกc (Edit / Delete)

### 2. โ THรM mรฃ giแบฃm giรก mแปi

**Cรกch thแปฑc hiแปn:**
1. Click nรบt **"Thรชm mรฃ giแบฃm giรก"** (mรu hแปng, gรณc trรชn bรชn phแบฃi)
2. Modal form sแบฝ hiแปn thแป
3. ฤiแปn thรดng tin:
   - **Mรฃ giแบฃm giรก**: VD: NEWYEAR2025 (tแปฑ ฤแปng tแบกo tแปซ tiรชu ฤแป)
   - **Tiรชu ฤแป**: VD: "Chรo nฤm mแปi 2025"
   - **Mรด tแบฃ**: Mรด tแบฃ chi tiแบฟt
   - **Loแบกi giแบฃm giรก**: 
     - Phแบงn trฤm (%) - cรณ thแป set giแบฃm tแปi ฤa
     - Sแป tiแปn cแป ฤแปnh (VNฤ)
   - **Giรก trแป giแบฃm**: VD: 20 (nแบฟu %) hoแบทc 500000 (nแบฟu cแป ฤแปnh)
   - **Giแบฃm tแปi ฤa**: (chแป vแปi %) VD: 5000000
   - **ฤฦกn hรng tแปi thiแปu**: VD: 10000000
   - **Ngรy bแบฏt ฤแบงu**: Chแปn ngรy giแป
   - **Ngรy kแบฟt thรบc**: Chแปn ngรy giแป
   - **Trแบกng thรกi**: Bแบญt/Tแบฏt
4. Click **"Tแบกo mแปi"**

**Kแบฟt quแบฃ**: Mรฃ giแบฃm giรก mแปi ฤฦฐแปฃc thรชm vรo danh sรกch

### 3. โ SแปฌA mรฃ giแบฃm giรก

**Cรกch thแปฑc hiแปn:**
1. Trong bแบฃng danh sรกch, tรฌm mรฃ giแบฃm giรก cแบงn sแปญa
2. Click icon **Edit** (bรบt chรฌ mรu xanh) แป cแปt "Thao tรกc"
3. Modal form hiแปn thแป vแปi dแปฏ liแปu hiแปn tแบกi
4. Chแปnh sแปญa cรกc thรดng tin cแบงn thiแบฟt
5. Click **"Cแบญp nhแบญt"**

**Kแบฟt quแบฃ**: Mรฃ giแบฃm giรก ฤฦฐแปฃc cแบญp nhแบญt

### 4. โ XรA mรฃ giแบฃm giรก

**Cรกch thแปฑc hiแปn:**
1. Trong bแบฃng danh sรกch, tรฌm mรฃ giแบฃm giรก cแบงn xรณa
2. Click icon **Delete** (thรนng rรกc mรu ฤแป) แป cแปt "Thao tรกc"
3. Popup xรกc nhแบญn hiแปn thแป: "Bแบกn cรณ chแบฏc chแบฏn muแปn xรณa mรฃ giแบฃm giรก nรy?"
4. Click **"Xรณa"** ฤแป xรกc nhแบญn

**Kแบฟt quแบฃ**: Mรฃ giแบฃm giรก bแป xรณa khแปi hแป thแปng

### 5. โ BแบฌT/TแบฎT mรฃ giแบฃm giรก

**Cรกch thแปฑc hiแปn:**
1. Trong bแบฃng danh sรกch, tรฌm mรฃ giแบฃm giรก
2. Click vรo **Switch** แป cแปt "Kรญch hoแบกt"
3. Trแบกng thรกi tแปฑ ฤแปng cแบญp nhแบญt

**Kแบฟt quแบฃ**: Mรฃ giแบฃm giรก ฤฦฐแปฃc bแบญt/tแบฏt ngay lแบญp tแปฉc

### 6. โ LแปC vร TรM KIแบพM

**Bแป lแปc cรณ sแบตn:**
- **Tรฌm kiแบฟm**: Tรฌm theo mรฃ hoแบทc tiรชu ฤแป
- **Loแบกi giแบฃm giรก**: Phแบงn trฤm / Cแป ฤแปnh / Tแบฅt cแบฃ
- **Trแบกng thรกi**: Hoแบกt ฤแปng / Khรดng hoแบกt ฤแปng / Tแบฅt cแบฃ
- Nรบt **"ฤแบทt lแบกi"** ฤแป xรณa bแป lแปc

## Dแปฏ liแปu mแบซu

Hแป thแปng ฤรฃ cรณ 8 mรฃ giแบฃm giรก mแบซu:

1. **SUMMER2024** - Giแบฃm 20% mรนa hรจ
2. **WEDDING2024** - Giแบฃm 3.000.000ฤ gรณi cฦฐแปi
3. **NEWYEAR2025** - Giแบฃm 15% nฤm mแปi
4. **FLASH50** - Flash sale giแบฃm 50%
5. **VIPWEDDING** - Giแบฃm 5.000.000ฤ gรณi VIP
6. **EARLYBIRD** - Giแบฃm 10% ฤแบทt sแปm
7. **FIRSTORDER** - Giแบฃm 500.000ฤ khรกch mแปi
8. **WEEKEND20** - Giแบฃm 20% cuแปi tuแบงn

## Cรกch load dแปฏ liแปu mแบซu

```bash
cd backend
npx knex seed:run --specific=009_vouchers.ts
```

## API Endpoints ฤฦฐแปฃc sแปญ dแปฅng

- `GET /admin/vouchers` - Lแบฅy danh sรกch
- `GET /admin/vouchers/:id` - Lแบฅy chi tiแบฟt
- `POST /admin/vouchers` - Tแบกo mแปi
- `PUT /admin/vouchers/:id` - Cแบญp nhแบญt
- `DELETE /admin/vouchers/:id` - Xรณa

## Validation

Form tแปฑ ฤแปng validate:
- โ Mรฃ code khรดng ฤฦฐแปฃc trแปng
- โ Tiรชu ฤแป khรดng ฤฦฐแปฃc trแปng
- โ Giรก trแป giแบฃm phแบฃi > 0
- โ Nแบฟu %, giรก trแป phแบฃi tแปซ 0-100
- โ Ngรy kแบฟt thรบc phแบฃi sau ngรy bแบฏt ฤแบงu

## Trแบกng thรกi hiแปn thแป

Hแป thแปng tแปฑ ฤแปng hiแปn thแป trแบกng thรกi:
- ๐ข **ฤang diแปn ra** (mรu xanh) - Trong thแปi gian รกp dแปฅng
- ๐ต **Sแบฏp diแปn ra** (mรu xanh dฦฐฦกng) - Chฦฐa ฤแบฟn ngรy bแบฏt ฤแบงu
- ๐ด **ฤรฃ hแบฟt hแบกn** (mรu ฤแป) - Quรก ngรy kแบฟt thรบc
- โซ **Tแบฏt** (mรu xรกm) - isActive = false

## Tรณm tแบฏt

โ **THรM**: Nรบt "Thรชm mรฃ giแบฃm giรก" โ ฤiแปn form โ "Tแบกo mแปi"
โ **SแปฌA**: Icon Edit โ Chแปnh sแปญa โ "Cแบญp nhแบญt"
โ **XรA**: Icon Delete โ Xรกc nhแบญn โ "Xรณa"
โ **BแบฌT/TแบฎT**: Click Switch
โ **TรM KIแบพM**: Dรนng bแป lแปc phรญa trรชn bแบฃng

Tแบฅt cแบฃ chแปฉc nฤng ฤรฃ hoแบกt ฤแปng ฤแบงy ฤแปง! ๐
